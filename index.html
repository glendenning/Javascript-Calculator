<!DOCTYPE html>


<head>
    <meta charset="UTF-8">
    <link type="text/css" rel="stylesheet" href="style.css">
    <title> Javascript Calculator </title>
</head>

<body>

    <div id="container">

        <h1 id="calculatorHeading">Javascript Calculator</h1>

        <div id="outputArea">
            <h1>0</h1>
            <p>0</p>
        </div>

        <div id="buttons">
            <button id="acButton" class="button">AC</button>
            <button id="ceButton" class="button">CE</button>
            <button class="button operation">/</button>
            <button class="button operation">x</button>
            <button class="button number">7</button>
            <button class="button number">8</button>
            <button class="button number">9</button>
            <button class="button operation">-</button>
            <button class="button number">4</button>
            <button class="button number">5</button>
            <button class="button number">6</button>
            <button class="button operation">+</button>
            <button class="button number">1</button>
            <button class="button number">2</button>
            <button class="button number">3</button>
            <button id="equalsButton" class="button operation equals">=</button>
            <button id="zeroButton" class="button number">0</button>
            <button id="periodButton" class="button number">.</button>
        </div>

    </div>

    <p>By Jack Glendenning</p>

</body>

<script>

const numbers = Array.from(document.querySelectorAll('.number'));
const operators = Array.from(document.querySelectorAll('.operation'));
const equals = document.querySelector('.equals');
const acButton = document.getElementById('acButton');
const ceButton = document.getElementById('ceButton');
const outputArea = document.querySelector('#outputArea h1');
const recentArea = document.querySelector('#outputArea p');

var currentNumber = [];
var total = 0;

function updateTotal (lastOperator, lastNumber) {
    switch (lastOperator) {
        case '/':
            total /= lastNumber;
            break;
        case 'x':
            total *= lastNumber;
            break;
        case '+':
            total += lastNumber;
            break;
        case '-':
            total -= lastNumber;
            break;
    }
}

function AC () {
    recentArea.innerHTML = 0;
    outputArea.innerHTML = 0;
    currentNumber = [];
    total = 0;
}

numbers.map(number => {
    number.onclick = function() {
        if (recentArea.innerHTML.includes("=")) {
            AC();
        }
        if (!currentNumber.includes('.')){
            currentNumber.push(number.innerHTML);
            outputArea.innerHTML = currentNumber.join('');
        }
    };
});

operators.map(operator => {
    operator.onclick = function() {

        //make the output area display the operator
        outputArea.innerHTML = operator.innerHTML;

        if (recentArea.innerHTML == "0") {
            //for the first time, the total becomes the number that was typed
            recentArea.innerHTML = currentNumber.join('') + operator.innerHTML;
            total = parseInt(currentNumber.join(''));

        } else {

            var lastOperator = recentArea.innerHTML.slice(-1);
            updateTotal(lastOperator);

            recentArea.innerHTML += currentNumber.join('') + operator.innerHTML;
        }
        console.log('total is: ', total);

        // reset the current number
        currentNumber = [];

    }

});

equals.onclick = function () {
    // calculate the newest number and display the total
    // only do the following if an operator was not the last thing pressed
    lastOperator = recentArea.innerHTML.slice(-1);
    lastNumber = parseInt(currentNumber.join('')); 
    updateTotal(lastOperator, lastNumber); 

    recentArea.innerHTML += lastNumber + "=" + total;
    
    console.log('total is now ' + total);
}

acButton.onclick = function () {
    recentArea.innerHTML = 0;
    outputArea.innerHTML = 0;
    currentNumber = [];
    total = 0;
}
ceButton.onclick = function () {
    currentNumber = [];
    outputArea.innerHTML = 0;
}
// mission is to get equals to display. 1+1=2

</script>

</html>